import{m as h,q as d,N as m,r as u,O as r,P as t}from"./index-9389dc04.js";const o=h(),{token:i,flashMessage:v}=d(o),y=m("calls",()=>{const n=u({}),a=u(!1);function c({page:l=1,limit:e=10,search:f=""}){a.value=!0,r.get("/api/call?page="+l+"&limit="+e+"&call_id="+f,{headers:{Authorization:"Bearer "+i.value}}).then(s=>{n.value=s.data}).catch(s=>{console.log(s),s.response.status===401&&o.logout,s.response&&s.response.status==404?t.push({name:"404Resource",params:{resource:"calls"}}):t.push({name:"NetworkError"})}).finally(()=>{a.value=!1})}function p(l){a.value=!0,r.delete(`/api/call/${l}`,{headers:{Authorization:"Bearer "+i.value,Accept:"application/json","Content-Type":"application/json"}}).then(e=>{c({}),alert("The call deleted successfully.")}).catch(e=>{console.log(e),e.response.status===401&&o.logout,e.response&&e.response.status==404?t.push({name:"404Resource",params:{resource:"calls"}}):t.push({name:"NetworkError"})}).finally(()=>{a.value=!1})}return{calls:n,loading:a,get_calls:c,delete_call:p}});export{y as u};
